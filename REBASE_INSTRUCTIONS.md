# コミット整理実行手順

## 概要

182個のコミットを意味のある単位にまとめて、クリーンなコミット履歴を作成します。

## ⚠️ 重要: 実行前の準備

### 1. バックアップブランチを作成

```bash
git branch backup-before-squash-$(date +%Y%m%d-%H%M%S)
```

### 2. 現在の状態を確認

```bash
git log --oneline | head -20
git status
```

## 実行手順

### 方法1: スクリプトを使用（推奨）

```bash
./scripts/prepare_rebase.sh
```

### 方法2: 手動で実行

```bash
# 最初のコミットを取得
FIRST_COMMIT=$(git log --reverse --format="%h" | head -1)

# 対話的rebaseを開始
git rebase -i $FIRST_COMMIT
```

## 整理方針（主要グループ）

エディタが開いたら、以下の方針で各コミットを `pick`, `squash` (s), `fixup` (f) に変更してください：

### 1. 初期コミット (保持)
- `e52f926` → `pick`

### 2. 基本機能実装 (まとめる: 約3-5件)
- はてなブックマーク、ナビゲーション、データ鮮度情報
- → 最初を `pick`、残りを `squash`

### 3. UI改善 (まとめる: 約10-15件)
- レイアウト調整、UI統一、サブスクリプション
- → 最初を `pick`、残りを `squash`

### 4. キャッシュシステム (まとめる: 約15-20件)
- キャッシュ実装、スキーママイグレーション
- → 最初を `pick`、残りを `squash`

### 5. データベース接続 (まとめる: 約10-15件)
- 接続管理、リトライ、エラーハンドリング
- → 最初を `pick`、残りを `squash`

### 6. Hatena/Twitch修正 (まとめる: 約5-10件)
- キャッシュ問題の修正
- → 最初を `pick`、残りを `squash`

### 7. マネージャー初期化 (まとめる: 約10-15件)
- 初期化改善、スレッドセーフ
- → 最初を `pick`、残りを `squash`

### 8. Stock/Crypto追加 (まとめる: 約15-20件)
- 機能追加、yfinance実装、改善
- → 最初を `pick`、残りを `squash`

### 9. World News改善 (まとめる: 約2-3件)
- 最新記事取得、使用量削減
- → 最初を `pick`、残りを `squash`

### 10. デプロイ・スケジューラー (まとめる: 約3-5件)
- 自動実行制御、メール送信制御
- → 最初を `pick`、残りを `squash`

### 11. プロジェクト整理 (まとめる: 約2-3件)
- ファイル整理、ドキュメント整理
- → 最初を `pick`、残りを `squash`

### 12. レート制限実装 (まとめる: 約2件)
- 統一的なレート制限機能
- → 最初を `pick`、残りを `squash`

## 整理後の想定コミット数

182個 → 約15-20個の意味のあるコミット

## トラブル時の復元

```bash
# バックアップブランチから復元
git reset --hard backup-before-squash-YYYYMMDD-HHMMSS

# またはrebaseを中止
git rebase --abort
```
