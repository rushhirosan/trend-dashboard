<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥ - Trends Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/common.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/subscription.css') }}" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/subscription.js') }}"></script>
</head>
<body class="bg-light">
    <!-- „Éò„ÉÉ„ÉÄ„Éº -->
    <header class="bg-white shadow-sm border-bottom" id="mainHeader">
        <div class="container-fluid px-3">
            <div class="d-flex align-items-center justify-content-between py-2">
                <!-- Â∑¶ÂÅ¥: „É≠„Ç¥„Å®„Çø„Ç§„Éà„É´ -->
                <div class="d-flex align-items-center">
                    <i class="fas fa-envelope text-info me-2" style="font-size: 1.5rem;"></i>
                    <h1 class="h4 mb-0 text-info">„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥</h1>
                </div>
                <!-- Âè≥ÂÅ¥: „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
                <div class="d-flex align-items-center">
                    <a href="/" class="btn btn-outline-primary me-2">
                        <i class="fas fa-chart-line"></i> „Éà„É¨„É≥„Éâ‰∏ÄË¶ßÔºàÊó•Êú¨Ôºâ
                    </a>
                    <a href="/us" class="btn btn-outline-primary me-2">
                        <i class="fas fa-chart-line"></i> „Éà„É¨„É≥„Éâ‰∏ÄË¶ßÔºà„Ç¢„É°„É™„Ç´Ôºâ
                    </a>
                    <a href="/data-status" class="btn btn-outline-secondary me-2">
                        <i class="fas fa-clock"></i> <small>„Éá„Éº„ÇøÈÆÆÂ∫¶ÊÉÖÂ†±</small>
                    </a>
                    <a href="/subscription" class="btn btn-info">
                        <i class="fas fa-envelope"></i> <small>„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥</small>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <div class="container-fluid py-4">
        <!-- „Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥„É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <div class="px-3">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header bg-info text-white">
                            <h5><i class="fas fa-envelope"></i> „Éà„É¨„É≥„Éâ„Çµ„Éû„É™„ÉºÈÖç‰ø°</h5>
                        </div>
                        <div class="card-body">
                            <!-- „Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥ÁôªÈå≤„Éï„Ç©„Éº„É† -->
                            <div id="subscriptionForm">
                                <div class="row">
                                    <div class="col-md-8">
                                        <h6 class="mb-3">üìß „É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÁôªÈå≤„Åó„Å¶„ÄÅÊØéÊó•„ÅÆ„Éà„É¨„É≥„Éâ„Çµ„Éû„É™„Éº„ÇíÂèó„ÅëÂèñ„Çä„Åæ„Åó„Çá„ÅÜ</h6>
                                        <form id="emailSubscriptionForm">
                                            <div class="mb-3">
                                                <label for="emailInput" class="form-label">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                                                <input type="email" class="form-control" id="emailInput" placeholder="your-email@example.com" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="frequencySelect" class="form-label">ÈÖç‰ø°È†ªÂ∫¶</label>
                                                <select class="form-select" id="frequencySelect">
                                                    <option value="daily">ÊØéÊó•</option>
                                                    <option value="weekly">ÊØéÈÄ±</option>
                                                    <option value="monthly">ÊØéÊúà</option>
                                                </select>
                                            </div>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-paper-plane"></i> ÁôªÈå≤„Åô„Çã
                                            </button>
                                        </form>
                                    </div>
                                    <div class="col-md-4">
                                        <h6 class="mb-3">üìä ÈÖç‰ø°ÂÜÖÂÆπ„ÇíÈÅ∏Êäû</h6>
                                        <div class="subscription-options">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="google_trends" id="googleTrendsCheck" checked>
                                                <label class="form-check-label" for="googleTrendsCheck">
                                                    Google Trends
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="youtube_trends" id="youtubeTrendsCheck" checked>
                                                <label class="form-check-label" for="youtubeTrendsCheck">
                                                    YouTube „Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="music_trends" id="musicTrendsCheck" checked>
                                                <label class="form-check-label" for="musicTrendsCheck">
                                                    Èü≥Ê•Ω„Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="news_trends" id="newsTrendsCheck" checked>
                                                <label class="form-check-label" for="newsTrendsCheck">
                                                    „Éã„É•„Éº„Çπ„Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="podcast_trends" id="podcastTrendsCheck" checked>
                                                <label class="form-check-label" for="podcastTrendsCheck">
                                                    „Éù„ÉÉ„Éâ„Ç≠„É£„Çπ„Éà„Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="rakuten_trends" id="rakutenTrendsCheck" checked>
                                                <label class="form-check-label" for="rakutenTrendsCheck">
                                                    Ê•ΩÂ§©ÂïÜÂìÅ„Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="hatena_trends" id="hatenaTrendsCheck" checked>
                                                <label class="form-check-label" for="hatenaTrendsCheck">
                                                    „ÅØ„Å¶„Å™„Éñ„ÉÉ„ÇØ„Éû„Éº„ÇØ„Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" value="twitch_trends" id="twitchTrendsCheck" checked>
                                                <label class="form-check-label" for="twitchTrendsCheck">
                                                    Twitch„Ç≤„Éº„É†„Éà„É¨„É≥„Éâ
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- „Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥Áä∂ÊÖãË°®Á§∫ -->
                            <div id="subscriptionStatus" style="display: none;">
                                <div class="alert alert-success">
                                    <h6><i class="fas fa-check-circle"></i> ÁôªÈå≤ÂÆå‰∫Ü</h6>
                                    <p class="mb-2">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ: <strong id="registeredEmail"></strong></p>
                                    <p class="mb-3">ÈÖç‰ø°È†ªÂ∫¶: <strong id="registeredFrequency"></strong></p>
                                    <button class="btn btn-outline-danger btn-sm" id="unsubscribeBtn">
                                        <i class="fas fa-times"></i> ÁôªÈå≤Ëß£Èô§
                                    </button>
                                </div>
                            </div>
                            
                            <!-- „Çπ„ÉÜ„Éº„Çø„Çπ„É°„ÉÉ„Çª„Éº„Ç∏ -->
                            <div id="subscriptionMessage" class="alert" style="display: none;"></div>
                            
                            <!-- ÁôªÈå≤Ê∏à„Åø„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥Ë°®Á§∫ -->
                            <div id="subscriptionList" style="display: none;">
                                <h6 class="mb-3">üìã ÁôªÈå≤Ê∏à„Åø„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥</h6>
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th>„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</th>
                                                <th>ÈÖç‰ø°È†ªÂ∫¶</th>
                                                <th>ÈÖç‰ø°ÂÜÖÂÆπ</th>
                                                <th>ÁôªÈå≤Êó•</th>
                                                <th>Êìç‰Ωú</th>
                                            </tr>
                                        </thead>
                                        <tbody id="subscriptionTableBody">
                                            <!-- „Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥‰∏ÄË¶ß„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„Å´„Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥Ê©üËÉΩ„ÇíÂàùÊúüÂåñ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìß „Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥„Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÂÆå‰∫Ü');
            
            // „Çµ„Éñ„Çπ„ÇØ„É™„Éó„Ç∑„Éß„É≥Ê©üËÉΩ„ÅÆÂàùÊúüÂåñ
            if (typeof initSubscription === 'function') {
                initSubscription();
            }
        });
    </script>
</body>
</html>
